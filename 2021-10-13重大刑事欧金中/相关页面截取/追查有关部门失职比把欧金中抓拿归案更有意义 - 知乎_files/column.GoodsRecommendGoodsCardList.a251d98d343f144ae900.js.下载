(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1438:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return q}));var n=a(30),c=a.n(n),o=a(1),i=a.n(o),s=a(6),l=a.n(s),d=a(585),r=a(222),u=a.n(r);function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.trimZero,n=void 0!==a&&a,c=String(e).padStart(2,"0").slice(-2);return n&&"00"===c?"".concat(Math.floor(e/100)):"".concat(Math.floor(e/100),".").concat(c)}var b={"淘宝":"taobao","天猫":"tmall","京东":"jingdong","京东自营":"jingdongSale","知乎":"zhihu","美团酒旅":"meituanhotel","苏宁":"suning","有赞":"youzan"},v=a(95),O=a(2),j=a.n(O),g=a(8),p=a(1131),f=a(33),h=a.n(f),C=a(3);var k=function(e){var t=e.width,a=void 0===t?"10":t,n=e.height,c=void 0===n?"10":n;return Object(C.d)("svg",h()({width:a,height:c,viewBox:"0 0 10 10",fill:"none"},e),Object(C.d)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 0C7.76142 0 10 2.23858 10 5C10 7.76142 7.76142 10 5 10C2.23858 10 0 7.76142 0 5C0 2.23858 2.23858 0 5 0ZM5 1C2.79086 1 1 2.79086 1 5C1 7.20914 2.79086 9 5 9C7.20914 9 9 7.20914 9 5C9 2.79086 7.20914 1 5 1ZM5 2C5.27614 2 5.5 2.22386 5.5 2.5V4.21902C5.5 4.54533 5.65921 4.85112 5.92654 5.03825L7.37712 6.05365C7.60334 6.21201 7.65836 6.52378 7.5 6.75C7.34164 6.97622 7.02988 7.03124 6.80365 6.87288L4.92654 5.5589C4.65921 5.37178 4.5 5.06599 4.5 4.73967V2.5C4.5 2.22386 4.72386 2 5 2Z",fill:"white"}))},N=a(278),y="GoodsItemCardPromo",I=function(e){var t=e.countdown,a=Object(o.useState)(t),n=c()(a,2),s=n[0],l=n[1],d=Object(o.useRef)();Object(o.useEffect)((function(){return s<=0?(clearInterval(d.current),void l(0)):(d.current=setInterval((function(){l(s-1)}),1e3),function(){return clearInterval(d.current)})}),[s]);var r=Object(N.b)(s),u=r.d,m=r.h,b=r.m,v=r.s,O="".concat(u?u+"天":""," ").concat(m,":").concat(b,":").concat(v);return Object(C.d)("div",{className:y},Object(C.d)("div",{className:"".concat(y,"-left")},Object(C.d)(k,{className:"".concat(y,"-icon")}),Object(C.d)("span",null,"限时秒杀")),Object(C.d)("div",{className:"".concat(y,"-right")},s?Object(C.d)(i.a.Fragment,null,Object(C.d)("span",null,"距结束还剩 "),Object(C.d)("span",{className:"".concat(y,"-rightText")},O)):Object(C.d)("span",null,"活动已结束")))},w=a(703),S=a(18),G=function(e){var t=e.className,a=e.style,n=e.id,c=e.skuId,i=e.imgUrl,s=e.title,d=e.price,r=void 0===d?0:d,u=e.source,O=e.sourceId,j=e.subtitle,f=e.tags,h=void 0===f?[]:f,k=e.promoInfo,N=void 0===k?{}:k,y=e.showBottomLine,G=void 0!==y&&y,T=e.zaData,F=void 0===T?{}:T,L=e.onClick,_=N.type,z=N.price,x=void 0===z?0:z,M=N.countdown,R=v.f.includes(_)&&M>0,E=j||u;v.d.ZhiGoods===O&&(E="知乎自营"),Object(o.useEffect)((function(){(null==F?void 0:F.showId)&&g.a.trackCardShow(null,{id:null==F?void 0:F.showId,path:[{module_name:"".concat(n,"_").concat(c,"_").concat(b[u])}]})}),[]);return Object(C.d)("div",{className:l()("GoodsItemCard",{"GoodsItemCard-promo":R},t),style:a,onClick:function(){(null==F?void 0:F.clickId)&&g.a.trackEvent(null,{id:null==F?void 0:F.clickId,action:"OpenUrl",path:[{module_name:"".concat(n,"_").concat(c,"_").concat(b[u])}]}),"function"==typeof L&&L()}},R&&Object(C.d)(I,{countdown:M}),Object(C.d)("div",{className:"GoodsItemCard-main"},Object(C.d)("div",{className:"GoodsItemCard-left"},Object(C.d)("div",{className:"GoodsItemCard-imgLayer"}),Object(C.d)("img",{className:"GoodsItemCard-imgUrl",src:i,alt:""})),Object(C.d)("div",{className:"GoodsItemCard-right"},Object(C.d)("div",{className:"GoodsItemCard-title"},s),!!h.length&&Object(C.d)(w.a,{className:"GoodsItemCard-tags",tags:Object(S.camelizeKeys)(h)}),Object(C.d)("div",{className:"GoodsItemCard-footer"},Object(C.d)("div",{className:"GoodsItemCard-priceBox"},Object(C.d)("span",{className:"GoodsItemCard-price"},"¥".concat(m(x||r))),x?Object(C.d)("span",{className:"GoodsItemCard-originalPrice"},"¥".concat(m(r))):null),Object(C.d)("div",{className:"GoodsItemCard-source"},E,Object(C.d)(p.a,{size:20,center:!0})))),Object(C.d)("div",{className:"GoodsItemCard-bottomLine",style:{display:G?"block":"none"}})))};G.prototype={className:j.a.string,style:j.a.object,id:j.a.string,skuId:j.a.string,imgUrl:j.a.string.isRequired,title:j.a.string.isRequired,subtitle:j.a.string,price:j.a.number,source:j.a.string.isRequired,sourceId:j.a.number.isRequired,showBottomLine:j.a.bool,tags:j.a.array,zaData:j.a.object,promoInfo:j.a.object,onClick:j.a.func};var T=G,F=a(700),L=a(43),_=a.n(L),z=function(){return Object(C.d)(i.a.Fragment,null)},x={SkeletonH01:function(e){var t=e.lineClass;return Object(C.d)(i.a.Fragment,null,Object(C.d)("div",{className:t}),Object(C.d)("div",{className:t}))},SkeletonP01:function(e){var t=e.lineClass,a=e.blockClass;return Object(C.d)(i.a.Fragment,null,Object(C.d)("div",{className:a}),Object(C.d)("div",null,Object(C.d)("div",{className:t}),Object(C.d)("div",{className:t})))},SkeletonT01:function(e){var t=e.lineClass;return Object(C.d)(i.a.Fragment,null,Object(C.d)("div",{className:t}),Object(C.d)("div",{className:t}),Object(C.d)("div",{className:t}),Object(C.d)("div",{className:t}))},SkeletonT02:function(e){var t=e.lineClass;return Object(C.d)(i.a.Fragment,null,Object(C.d)("div",{className:t}),Object(C.d)("div",{className:t}),Object(C.d)("div",{className:t}))},SkeletonC01:function(e){var t=e.lineClass,a=e.blockClass;return Object(C.d)(i.a.Fragment,null,Object(C.d)("div",{className:a}),Object(C.d)("div",null,Object(C.d)("div",{className:t}),Object(C.d)("div",{className:t})))},SkeletonC02:function(e){var t=e.lineClass,a=e.blockClass;return Object(C.d)(i.a.Fragment,null,Object(C.d)("div",null,Object(C.d)("div",{className:t}),Object(C.d)("div",{className:t})),Object(C.d)("div",{className:a}))},SkeletonC03:function(e){var t=e.lineClass,a=e.blockClass;return Object(C.d)(i.a.Fragment,null,Object(C.d)("div",{className:a}),Object(C.d)("div",{style:{width:"100%"}},Object(C.d)("div",{className:t}),Object(C.d)("div",{className:t})))},SkeletonC04:function(e){var t=e.lineClass,a=e.blockClass;return Object(C.d)(i.a.Fragment,null,Object(C.d)("div",{className:"".concat(a,"-1")}),Object(C.d)("div",{className:a}),Object(C.d)("div",{style:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}},Object(C.d)("div",{className:t}),Object(C.d)("div",{className:t})))},SkeletonI01:function(e){var t=e.blockClass;return Object(C.d)(i.a.Fragment,null,Object(C.d)("div",{className:t}))},SkeletonSpacing:z,SkeletonFill:z},M=i.a.memo((function(e){var t,a=e.variant,n=void 0===a?"H01":a,c=e.height,o=e.width,i=void 0===o?"auto":o,s=e.animation,d=void 0===s?"ease-in":s,r="skeleton__line--".concat(n.toLowerCase()),u="skeleton--".concat(n.toLowerCase()),m=l()(_()({skeleton__block:!0},"skeleton__block--".concat(n.toLowerCase()),!0)),b=l()(_()({skeleton__line:!0},r,!0)),v=l()((t={skeleton:!0},_()(t,u,!0),_()(t,"skeleton--ease-in","ease-in"===d),t)),O={width:i};c&&["Spacing","Fill"].includes(n)&&(O.height="number"==typeof c?"".concat(c,"px"):c);var j=x["Skeleton".concat(n)];return Object(C.d)("section",{className:v,style:O},Object(C.d)(j,{variant:n,lineClass:b,blockClass:m}))}));M.propTypes={variant:j.a.string,height:j.a.oneOfType([j.a.string,j.a.number]),width:j.a.oneOfType([j.a.string,j.a.number]),animation:j.a.oneOfType([j.a.bool,j.a.string])};var R=M;var E=i.a.memo((function(e){var t=e.content,a=function(e){return("string"==typeof e?e.split(","):e).map((function(e){var t=e.split("-"),a=c()(t,2),n=a[0],o=a[1];return["Spacing","Fill"].includes(n)?{type:n,height:+o}:{type:n,count:+o||1}}))}(void 0===t?"T01":t);return Object(C.d)(i.a.Fragment,null,a.map((function(e,t){var a=e.type,n=e.count,c=e.height;return n?Array.from({length:n}).map((function(e,n){return Object(C.d)(R,{variant:a,key:"".concat(t,"-").concat(n)})})):Object(C.d)(R,{variant:a,height:c,key:"".concat(t,"-").concat(c)})})))}));E.prototype={content:Object(O.oneOfType)([Object(O.arrayOf)(O.string),O.string])};var U=E,B=a(21),Z={"京东":"jingdong","淘宝":"taobao","拼多多":"pinduoduo","苏宁":"suning","美团酒旅":"meituanhotel","知乎":"zhihu","有赞":"youzan"},D=function(e){var t=e.className,a=e.style,n=e.showModal,s=void 0===n||n,r=e.withModal,m=void 0===r||r,b=e.modalTitle,O=void 0===b?"该商品的所有购买渠道":b,j=e.id,p=e.url,f=void 0===p?"":p,h=e.fetcherOptions,k=void 0===h?{}:h,N=e.scenes,y=void 0===N?0:N,I=e.fetcher,w=void 0===I?d.a:I,G=e.onClose,L=e.onSelectCard;Object(B.g)();var _=Object(o.useState)(0),z=c()(_,2),x=z[0],M=z[1],R=Object(o.useState)(!1),E=c()(R,2),D=E[0],q=E[1],P=Object(o.useState)([]),K=c()(P,2),A=K[0],H=K[1],J=Object(o.useState)([]),V=c()(J,2),Q=V[0],W=V[1],X=Object(o.useState)(!1),Y=c()(X,2),$=Y[0],ee=Y[1];Object(o.useEffect)((function(){g.a.trackCardShow(null,{id:10331,path:[{module_name:j}]})}),[]),Object(o.useEffect)((function(){q(!0);var e=f||"/api/v4/mcn/linkcard/".concat(j,"?scenes=").concat(y);w(e,k).then((function(e){var t=Object(S.camelizeKeys)((null==e?void 0:e.data)||{}),a=t.children,n=void 0===a?[]:a,c=t.similarChildren,o=void 0===c?[]:c,i=[],s=[],l=[],d=[];u()(null==e?void 0:e.data)||n.length&&(n.forEach((function(e){var t=e.isSimilarChildren;e.sourceId!==v.d.ZhiGoods?t?d.push(Object.assign({},e,{children:null})):l.push(Object.assign({},e,{children:null})):t?s.push(Object.assign({},e,{children:null})):i.push(Object.assign({},e,{children:null}))})),i.push(Object.assign({},null==e?void 0:e.data,{children:null}))),H(i.concat(l).concat(s).concat(d)),W(o),ee(!1)})).catch((function(){ee(!0)})).finally((function(){setTimeout((function(){q(!1)}),500)}))}),[j,x]);var te=Object(C.d)("div",{className:"GoodsCardList-container"},D?Object(C.d)(i.a.Fragment,null,Object(C.d)(U,{content:"C03,Spacing-26,C03",height:72})):$?Object(C.d)("div",{className:"GoodsCardList-error"},Object(C.d)("div",{className:"GoodsCardList-errorDesc"},"Oops~ 出错了"),Object(C.d)("div",{className:"GoodsCardList-errorBtn",onClick:function(){M(x+1)}},"刷新重试")):Object(C.d)(i.a.Fragment,null,[A,Q].map((function(e,t){return e.length?Object(C.d)(o.Fragment,{key:t},e.map((function(e,a){var n=Object(S.camelizeKeys)(e),c=n.id,i=n.skuid,s=n.title,l=n.url,d=n.imgUrl,r=n.price,u=n.source,m=n.sourceId,b=n.subtitle,v=n.productType,O=n.tags,j=n.promoInfo,g=n.isSimilarChildren;return Object(C.d)(o.Fragment,{key:"".concat(i,"-").concat(t,"-").concat(a)},1===t&&Object(C.d)("div",{className:"GoodsCardList-similarText"},"相似商品"),Object(C.d)(B.b,{block:"goodsRecommend_polymericCardPopup_goodsCard",content:{type:"GoodsRecommend",id:"".concat(c,"-").concat(i,"-").concat(Z[u])},extra:{link:{url:l}}},Object(C.d)(B.e,{shouldTrackClick:!0,className:"GoodsCardList-listItem",zaType:"Card",zaText:s,zaAction:"OpenUrl",zaEventType:"Click",extra:{link:{url:l},configMap:{goodsListType:g?"similar":"same"}}},Object(C.d)(T,{id:c,skuId:i,title:s,imgUrl:d,price:r,source:u,sourceId:m,subtitle:b,productType:v,showBottomLine:!1,zaData:{showId:10371,clickId:10372},tags:O,promoInfo:j,onClick:function(){return t=e,void(L&&L(t));var t}}))))}))):null}))));return m?Object(C.d)(F.a,{className:l()("GoodsCardList",t),style:a,size:"large",title:O,onClose:G},s&&te):te};D.prototype={className:j.a.string,style:j.a.object,showModal:j.a.bool,withModal:j.a.bool,modalTitle:j.a.string,id:j.a.string,url:j.a.string,fetcherOptions:j.a.object,scenes:j.a.number,fetcher:j.a.func,onClose:j.a.func,onSelectCard:j.a.func};var q=D}}]);
//# sourceMappingURL=column.GoodsRecommendGoodsCardList.a251d98d343f144ae900.js.map